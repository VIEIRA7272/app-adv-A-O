# Guia de Instalação - App Advocacia (Documentos Digitais)

Este guia explica como configurar o "motor" (Supabase) do aplicativo para que ele funcione exclusivamente para o seu escritório.

## Passo 1: Criar o Banco de Dados (Supabase)

1.  Acesse [supabase.com](https://supabase.com) e crie uma conta (é grátis).
2.  Clique em **"New Project"**.
3.  Dê um nome (ex: `App Advocacia Silva`) e defina uma senha forte.
4.  Escolha a região (São Paulo - Brazil) se disponível, ou US East.
5.  Clique em **"Create new project"** e aguarde uns minutos.

## Passo 2: Configurar as Tabelas e Armazenamento

1.  No menu lateral esquerdo, clique em **SQL Editor** (ícone de terminal `>_`).
2.  Clique em **"New Query"**.
3.  Copie TODO o código abaixo e cole na área de texto:

```sql
-- 1. Tabela de Vídeos e Peças
create table if not exists videos_pecas (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  slug text unique not null,
  processo text not null,
  titulo_peca text,
  video_url text,
  pdf_final_url text
);

-- 2. Segurança (Permitir acesso público ao app)
alter table videos_pecas enable row level security;

create policy "Leitura Pública Tabela"
on videos_pecas for select to anon using (true);

create policy "Inserção Pública Tabela"
on videos_pecas for insert to anon with check (true);

-- 3. Criar Pastas de Armazenamento (Buckets)
insert into storage.buckets (id, name, public)
values ('videos-explicativos', 'videos-explicativos', true)
on conflict (id) do nothing;

insert into storage.buckets (id, name, public)
values ('pecas-juridicas', 'pecas-juridicas', true)
on conflict (id) do nothing;

-- 4. Permissões de Arquivos (Upload e Leitura)
create policy "Public Access Videos"
on storage.objects for select to anon using ( bucket_id = 'videos-explicativos' );

create policy "Public Upload Videos"
on storage.objects for insert to anon with check ( bucket_id = 'videos-explicativos' );

create policy "Public Access Pecas"
on storage.objects for select to anon using ( bucket_id = 'pecas-juridicas' );

create policy "Public Upload Pecas"
on storage.objects for insert to anon with check ( bucket_id = 'pecas-juridicas' );
```

4.  Clique no botão **"RUN"** (verde) no canto inferior direito.
5.  Deve aparecer "Success" nas mensagens abaixo.

## Passo 3: Pegar as Chaves de Acesso

1.  No menu lateral, vá em **Project Settings** (ícone de engrenagem ⚙️).
2.  Clique em **API**.
3.  Você vai precisar de dois valores que aparecem aí:
    *   **Project URL** (ex: `https://xyz...supabase.co`)
    *   **anon public** (uma chave longa que começa com `ey...`)

## Passo 4: Configurar no App (Para o Desenvolvedor)

*Entregue essas duas chaves (URL e ANON KEY) para quem for configurar o site, ou coloque-as no arquivo de configuração antes de subir para a Hostinger.*
